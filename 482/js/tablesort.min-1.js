!function(t){t.tablesort=function(e,s){var r=this;r.table=e,r.settings=t.extend({},t.tablesort.defaults,s),r.headers=e.find(r.settings.div?".tc-header .sort":"thead th.sort"),r.settings.parsers=r.settings.parsers||{},r.index=null,r.direction=null,r.loading=!1,t.each(["asc","desc"],(function(t,e){var s=r.headers.filter("."+r.settings[e]);s.length&&(r.index=s.index(),r.direction=e,s.data("sort-dir",e))}));var a=t.extend({num:function(t){return parseFloat(t.toString().replace(/[^\d.+-]+/g,""))||0}},r.settings.parsers);r.parse=function(t,e){return t&&a.hasOwnProperty(t)?a[t](e):e},r.headers.on("click.tablesort",(function(){return r.sort(t(this)),!1})),r.headers.bind("selectstart",!1)},t.tablesort.prototype={sort:function(e){var s=this;if(!s.loading){s.loading=!0;var r="loading";s.headers.addClass(r);var a,n=e.index();a=s.index!==n?"desc"==e.data("sort-dir")?"desc":"asc":"asc"==s.direction?"desc":"asc";var i=new t.Deferred;i.done((function(){s.headers.removeClass(s.settings.asc+" "+s.settings.desc),e.addClass(s.settings[a]),s.index=n,s.direction=a,s.table.trigger("sorted.tablesort")})).always((function(){s.headers.removeClass(r),setTimeout((function(){s.loading=!1}),50)})),setTimeout((function(){var r,n,d;if(s.table.hasClass("sort-external"))s.table.trigger("sort.tablesort",{th:e,direction:a,deferred:i});else{if(s.settings.div){var o=".tc-item";n=(r=s.table).find(o),d=r.find(o+" ."+e.data("sort-field"))}else n=(r=s.table.find("tbody")).find("tr"),d=r.find("tr td:nth-child("+(e.index()+1)+")");for(var l=e.data("sort-type"),c=e.data("sort-getter")||function(t,e){var s=e.data("s");return null!=s?s:e.text()},u=d.map((function(r,a){return s.parse(l,c(t(e),t(a)))})),f=[],h=0,g=u.length;h<g;++h)f.push({row:n[h],value:u[h]});var v="asc"==a?1:-1;f.sort((function(t,e){return s.settings.compare(t.value,e.value)*v}));var b=[];t.each(f,(function(t,e){b.push(e.row)})),r.append(b),i.resolve()}}),10)}},destroy:function(){this.headers.off("click.tablesort"),this.table.data("tablesort",null)}},t.tablesort.defaults={asc:"ascending",desc:"descending",div:!1,compare:function(t,e){return t>e?1:t<e?-1:0}},t.fn.tablesort=function(e){var s;return this.each((function(){s=t(this),s.data("tablesort")||s.data("tablesort",new t.tablesort(s,e))}))}}(window.jQuery);